!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react/lib/ReactDOM")):"function"==typeof define&&define.amd?define(["react","react/lib/ReactDOM"],e):"object"==typeof exports?exports.PhRouterTransition=e(require("react"),require("react/lib/ReactDOM")):t.PhRouterTransition=e(t.React,t.ReactDom)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}({0:function(t,e,n){t.exports=n(53)},2:function(e,n){e.exports=t},3:function(t,e,n){"use strict";t.exports=n(4)},4:function(t,n){t.exports=e},7:function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?h=f.concat(h):v=-1,h.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=h.length;e;){for(f=h,h=[];++v<e;)f&&f[v].run();v=-1,e=h.length}f=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,p,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,h=[],m=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||m||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},53:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,n(54);var i=n(55),o=r(i);e.default=o.default,t.exports=e.default},54:function(t,e){},55:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(3),p=r(c),d=n(56),f=r(d),h=n(57),m=r(h),v=function(t){function e(n,r){i(this,e),t.call(this,n,r),this.props.animateOnInit?this.state={child1:null,child2:null,nextChild:1}:this.state={child1:this.props.children,child2:null,nextChild:2},this.transite=this.transite.bind(this),this.gerRef=this.getRef.bind(this),this.queue=new m.default(1,1/0),this.itemClass="ph-transition-item",this.routeRecord=[n.location.pathname],this.forward=!0}return o(e,t),a(e,null,[{key:"propTypes",value:{transitionName:u.PropTypes.string,loadedCallback:u.PropTypes.func,timeout:u.PropTypes.number,animateOnInit:u.PropTypes.bool,data:u.PropTypes.object},enumerable:!0},{key:"defaultProps",value:{timeout:500,transitionName:"fade",animateOnInit:!0,classMapping:{}},enumerable:!0}]),e.prototype.componentDidMount=function(){var t=this.props,e=t.animateOnInit,n=t.data,r=t.children;if(e)this.transite(r);else{var i=this.getRef("child1");if(i){var o=p.default.findDOMNode(i);i.onTransitionDidEnd&&i.onTransitionDidEnd(n),o.classList.remove(this.itemClass)}}},e.prototype.componentWillReceiveProps=function(t){var e=this;this.forward=this.routeForward(t.location.pathname);var n=function(){e.queue.add(function(){return e.transite(t.children)})},r=function(){var n=1===e.state.nextChild?2:1;e.state["child"+n]=t.children,e.forceUpdate()};this.props.children&&this.props.children.props&&this.props.children.props["data-transition-id"]&&t.children.props["data-transition-id"]?this.props.children.props["data-transition-id"]!==t.children.props["data-transition-id"]?n():r():this.props.children!==t.children?n():r()},e.prototype.routeForward=function(t){var e=this.routeRecord.length;return e>1&&this.routeRecord[e-2]===t?(this.routeRecord.pop(),!1):(this.routeRecord.push(t),!0)},e.prototype.getClass=function(t){return t&&this.forward||!t&&!this.forward?"ph-transition-from":"ph-transition-to"},e.prototype.getRef=function(t){var e=this.refs[t];return e&&e.getWrappedInstance&&(e=e.getWrappedInstance()),e},e.prototype.transite=function(t){var e=this;return new Promise(function(n,r){e.state["child"+e.state.nextChild]=t,e.forceUpdate(function(){var t=e.getRef("child"+(1===e.state.nextChild?2:1)),i=e.getRef("child"+e.state.nextChild),o=p.default.findDOMNode(t),s=p.default.findDOMNode(i),a=0,u=function(){return i.onTransitionWillStart?i.onTransitionWillStart(e.props.data)||Promise.resolve():t&&t.onTransitionLeaveWillStart?t.onTransitionLeaveWillStart(e.props.data)||Promise.resolve():Promise.resolve()},l=function n(){if(s.classList.contains("ph-transition-index")?e.forward=!1:o&&o.classList.contains("ph-transition-index")&&(e.forward=!0),s){if(a=e.props.timeout,s.classList.add(e.props.transitionName+"-enter"),o&&s.classList.add(e.itemClass),s.classList.add(e.getClass(!0)),s.offsetHeight,i.transitionManuallyStart)return i.transitionManuallyStart(e.props.data,n)||Promise.resolve();s.classList.add(e.props.transitionName+"-enter-active")}if(o){if(o.classList.add(e.props.transitionName+"-leave"),o.classList.add(e.itemClass),o.classList.add(e.getClass(!1)),a=e.props.timeout,o.offsetHeight,t.transitionLeaveManuallyStart)return t.transitionLeaveManuallyStart(e.props.data,n)||Promise.resolve();o.classList.add(e.props.transitionName+"-leave-active")}return Promise.resolve()},c=function(){return i.onTransitionDidStart?i.onTransitionDidStart(e.props.data)||Promise.resolve():t&&t.onTransitionDidStartLeave?t.onTransitionLeaveDidStart(e.props.data)||Promise.resolve():Promise.resolve()},d=function(){return new Promise(function(t){setTimeout(function(){e.state.nextChild=1===e.state.nextChild?2:1,e.state["child"+e.state.nextChild]=null,e.forceUpdate(t)},a)})},f=function(){return i.onTransitionWillEnd?i.onTransitionWillEnd(e.props.data)||Promise.resolve():t&&t.onTransitionLeaveWillEnd?t.onTransitionLeaveWillEnd(e.props.data)||Promise.resolve():Promise.resolve()},h=function(){if(s){if(s.classList.remove(e.props.transitionName+"-enter"),s.classList.remove(e.getClass(!0)),s.classList.remove(e.itemClass),i.transitionManuallyStop)return i.transitionManuallyStop(e.props.data)||Promise.resolve();s.classList.remove(e.props.transitionName+"-enter-active")}if(o){if(o.classList.remove(e.props.transitionName+"-leave"),o.classList.remove(e.getClass(!1)),o.classList.remove(e.itemClass),t.transitionLeaveManuallyStop)return t.transitionLeaveManuallyStop(e.props.data)||Promise.resolve();o.classList.remove(e.props.transitionName+"-leave-active")}return Promise.resolve()},m=function(){return i.onTransitionDidEnd?i.onTransitionDidEnd(e.props.data)||Promise.resolve():t&&t.onTransitionLeaveDidEnd?t.onTransitionLeaveDidEnd(e.props.data)||Promise.resolve():Promise.resolve()};Promise.resolve().then(u).then(l).then(c).then(d).then(f).then(h).then(m).then(function(){e.props.loadedCallback&&e.props.loadedCallback(),n()}).catch(r)})})},e.prototype.render=function(){return l.default.createElement("div",s({},this.props,{className:f.default("ph-transition-wrapper",this.props.className)}),l.default.Children.map(this.state.child1,function(t){return l.default.cloneElement(t,{ref:"child1"})}),l.default.Children.map(this.state.child2,function(t){return l.default.cloneElement(t,{ref:"child2"})}))},e}(l.default.Component);e.default=v,t.exports=e.default},56:function(t,e,n){var r,i;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r))t.push(n.apply(null,r));else if("object"===i)for(var s in r)o.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(r=[],i=function(){return n}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()},57:function(t,e,n){(function(e){t.exports=n(e.env.PROMISE_QUEUE_COVERAGE?58:59)}).call(e,n(7))},58:function(t,e){},59:function(t,e,n){var r,i;!function(o,s){"use strict";"object"==typeof t&&t.exports?t.exports=s():(r=s,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)))}(this,function(){"use strict";function t(t,e){this.pendingPromises=0,this.maxPendingPromises="undefined"!=typeof t?t:1/0,this.maxQueuedPromises="undefined"!=typeof e?e:1/0,this.queue=[]}var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},n=function(){},r=function(t){return t&&"function"==typeof t.then?t:new e(function(e){e(t)})};return t.configure=function(t){e=t},t.prototype.add=function(t){var r=this;return new e(function(e,i,o){return r.queue.length>=r.maxQueuedPromises?void i(new Error("Queue limit reached")):(r.queue.push({promiseGenerator:t,resolve:e,reject:i,notify:o||n}),void r._dequeue())})},t.prototype.getPendingLength=function(){return this.pendingPromises},t.prototype.getQueueLength=function(){return this.queue.length},t.prototype._dequeue=function(){var t=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var e=this.queue.shift();if(!e)return!1;try{this.pendingPromises++,r(e.promiseGenerator()).then(function(n){t.pendingPromises--,e.resolve(n),t._dequeue()},function(n){t.pendingPromises--,e.reject(n),t._dequeue()},function(t){e.notify(t)})}catch(n){t.pendingPromises--,e.reject(n),t._dequeue()}return!0},t})}})});